<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Aggregate data along theme dimension — general_aggregate • HydroBOT</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Aggregate data along theme dimension — general_aggregate"><meta name="description" content="This is the core aggregation function for all the aggregation types. it's
really a fairly lightweight wrapper over a small dplyr::group_by and
summarise to handle passing in grouping columns, aggregation columns, and
functions as arguments and handle naming. It assumes no spatial information
to deal with. Preparing the data to have the proper grouping columns is the
job of the outer calling functions (or the user)"><meta property="og:description" content="This is the core aggregation function for all the aggregation types. it's
really a fairly lightweight wrapper over a small dplyr::group_by and
summarise to handle passing in grouping columns, aggregation columns, and
functions as arguments and handle naming. It assumes no spatial information
to deal with. Preparing the data to have the proper grouping columns is the
job of the outer calling functions (or the user)"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">HydroBOT</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2.9036</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Aggregate data along theme dimension</h1>

      <div class="d-none name"><code>general_aggregate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is the core aggregation function for all the aggregation types. it's
really a fairly lightweight wrapper over a small dplyr::group_by and
summarise to handle passing in grouping columns, aggregation columns, and
functions as arguments and handle naming. It assumes no spatial information
to deal with. Preparing the data to have the proper grouping columns is the
job of the outer calling functions (or the user)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">general_aggregate</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">groupers</span>,</span>
<span>  <span class="va">aggCols</span>,</span>
<span>  <span class="va">funlist</span>,</span>
<span>  prefix <span class="op">=</span> <span class="st">"agg_"</span>,</span>
<span>  failmissing <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>a dataframe or tibble with data to aggregate</p></dd>


<dt id="arg-groupers">groupers<a class="anchor" aria-label="anchor" href="#arg-groupers"></a></dt>
<dd><p>an expression for the columns to use as grouping variables
for the aggregation (see <code>selectcreator</code> for formats)</p></dd>


<dt id="arg-aggcols">aggCols<a class="anchor" aria-label="anchor" href="#arg-aggcols"></a></dt>
<dd><p>an expression for the columns to aggregate (the data columns).
See <code>selectcreator</code> for formats</p></dd>


<dt id="arg-funlist">funlist<a class="anchor" aria-label="anchor" href="#arg-funlist"></a></dt>
<dd><p>a list of functions and their arguments used to aggregate the
data. See <code>functionlister</code> for creation in many cases. The situation with a
bare anonymous function, e.g. <code>~mean(., na.rm = T)</code> is not supported
because we need a name. Use a named list if using anonymous functions, e.g.
<code>list(mean = ~mean(., na.rm = T))</code>. <em>If using functions with a
data-variable argument</em>, e.g. weighted.mean with a column of weights, we
now (as of <code>dplyr</code> 1.1) have some workarounds. One option is if specified
<em>as a function argument</em>, the function can just go in as a bare name or
anonymous. If specified elsewhere, it can be wrapped in <code><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">rlang::quo()</a></code>,
e.g. <code>agglist &lt;- rlang::quo(list(mean = mean, wm = ~weighted.mean(., weight_column_name, na.rm = T)))</code>. If it isn't, there is now an internal
workaround to add that on that seems to be stable but may cause unforeseen
issues. This workaround also allows building custom aggregation functions
(not-anonymous) with the data-variable argument either exposed or hardcoded
(see <code><a href="SpatialWeightedMean.html">SpatialWeightedMean()</a></code>). The error checks for names do not work for
quosures, so make sure you name the list if using <code><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">rlang::quo()</a></code>.</p></dd>


<dt id="arg-prefix">prefix<a class="anchor" aria-label="anchor" href="#arg-prefix"></a></dt>
<dd><p>character prefix for the column name. Default <code>"agg_"</code>, but
often better to use the aggregation step. Typically set by particular
calling function to give it the type of aggregation</p></dd>


<dt id="arg-failmissing">failmissing<a class="anchor" aria-label="anchor" href="#arg-failmissing"></a></dt>
<dd><p>logical, default <code>TRUE</code>: fail if the requested grouping or
aggregation columns not exist. If <code>FALSE</code>, proceed with those that do exist
and silently drop those that don't. Similar to <code><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">tidyselect::all_of()</a></code> vs
<code><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">tidyselect::any_of()</a></code> in <code>tidyselect</code></p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>arguments passed to the aggregation functions. This is <em>very</em>
limited, and does not work with data arguments under most conditions.
Almost always better to specify explicitly when building <code>funlist</code>, but
works OK with simple functions, e.g. passing <code>na.rm = TRUE</code> to mean</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a tibble with columns for the grouping variables and a column of
within-group aggregated values for each <code>aggCol</code> and function in <code>funlist</code>,
named according to the function applied and original name.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Galen Holt, Georgia Dwyer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

